<!-- Add this script at the very end of your body tag, just before </body> -->
<script>
// Simple fix for generate preview button - add this after all other scripts
document.addEventListener('DOMContentLoaded', function() {
    // Wait for everything to be fully loaded
    setTimeout(function() {
        console.log('🔧 Setting up generate preview button (simple fix)...');
        
        const generateBtn = document.getElementById('generatePreviewBtn');
        if (generateBtn && !generateBtn.onclick) {
            console.log('🎯 Attaching event listener to generate preview button...');
            
            generateBtn.onclick = function() {
                console.log('🎯 Generate preview button clicked!');
                
                // Validate pattern selection
                const selectedPattern = getSelectedPattern();
                if (!selectedPattern) {
                    alert('Please select a wallpaper pattern');
                    return;
                }

                // Validate dimensions
                const widthFeet = parseInt(document.getElementById('widthFeet').value) || 0;
                const widthInches = parseFloat(document.getElementById('widthInches').value) || 0;
                const heightFeet = parseInt(document.getElementById('heightFeet').value) || 0;
                const heightInches = parseFloat(document.getElementById('heightInches').value) || 0;

                if (widthFeet === 0 && widthInches === 0) {
                    alert('Please enter wall width');
                    return;
                }

                if (heightFeet === 0 && heightInches === 0) {
                    alert('Please enter wall height');
                    return;
                }

                // Show loading state
                generateBtn.disabled = true;
                generateBtn.textContent = 'Generating...';
                
                // Generate preview
                generatePreview().then(() => {
                    generateBtn.disabled = false;
                    generateBtn.textContent = 'Generate Preview';
                    
                    // Add buttons after preview
                    setTimeout(() => {
                        if (typeof addDownloadAndQuoteButtons === 'function') {
                            addDownloadAndQuoteButtons();
                        }
                    }, 500);
                    
                }).catch((error) => {
                    generateBtn.disabled = false;
                    generateBtn.textContent = 'Generate Preview';
                    alert('Error generating preview: ' + error.message);
                });
            };
            
            console.log('✅ Generate preview button event listener attached!');
        } else if (generateBtn && generateBtn.onclick) {
            console.log('✅ Generate preview button already has event listener');
        } else {
            console.log('❌ Generate preview button not found');
        }
    }, 3000); // Wait 3 seconds for everything to load
});
</script>
